package main

import (
	"fmt"
	"os"
	"strconv"
	"strings"
)

func readFile(path string) []string {

	data, err := os.ReadFile(path)
	if err != nil {
		panic(err)
	}
	strData := strings.TrimSpace(string(data))
	strSlice := strings.Split(strData, "\n")
	return strSlice
}
func returnSmallestPart(data []int) int {

	var min int = data[0]
	var secondMin int = data[0]
	for _, e := range data {
		element := e
		if element < min {
			secondMin = min
			min = e

		}
		if e > min && (secondMin == min || e < secondMin) {
			secondMin = e
		}
	}
	return min * secondMin
}
func partOne(data []string) int {
	var result int = 0
	for _, elem := range data {
		elemSlice := strings.Split(elem, "x")
		if len(elemSlice) < 3 {
			continue
		}
		intSlice := make([]int, len(elemSlice))
		for i, s := range elemSlice {
			n, e := strconv.Atoi(s)
			if e != nil {
				fmt.Println(len(elemSlice))
				fmt.Println(elemSlice)

				panic(e)
			}
			intSlice[i] = n
		}
		smallestPart := returnSmallestPart(intSlice)
		result += 2*intSlice[0]*intSlice[1] + 2*intSlice[1]*intSlice[2] + 2*intSlice[2]*intSlice[0] + smallestPart

	}

	return result
}

func main() {
	fmt.Println(partOne(readFile("./day2.txt")))

}
